<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered Kraken trading bot with real-time price updates and paper trading">
    <title>Kraken AI Trading Bot</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Kraken AI Trading Bot</h1>
            <p>High-frequency volatility scraper and mean reversion trader</p>

            <!-- Header Stats -->
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">Bankroll:</span>
                    <span class="stat-value" id="bankroll">$1,000</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total P&L:</span>
                    <span class="stat-value" id="total-pnl">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Win Rate:</span>
                    <span class="stat-value" id="win-rate">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Trades:</span>
                    <span class="stat-value" id="trade-count">0</span>
                </div>
            </div>
        </header>

        <!-- Bot Status Panel -->
        <div class="bot-status-panel">
            <h2>ü§ñ Bot Status</h2>
            <div class="bot-status-content">
                <div class="bot-status-item">
                    <span class="status-label">Status:</span>
                    <span class="status-value" id="bot-status">üî¥ Offline</span>
                </div>
                <div class="bot-status-item">
                    <span class="status-label">Mode:</span>
                    <span class="status-value" id="bot-mode">Unknown</span>
                </div>
                <div class="bot-status-item">
                    <span class="status-label">Pairs Scanned:</span>
                    <span class="status-value" id="pairs-scanned">0</span>
                </div>
                <div class="bot-status-item">
                    <span class="status-label">Trades Completed:</span>
                    <span class="status-value" id="trades-completed">0</span>
                </div>
                <div class="bot-status-item">
                    <span class="status-label">Current P&L:</span>
                    <span class="status-value" id="current-pnl">$0.00</span>
                </div>
                <div class="bot-activity" id="bot-activity">Waiting for bot status...</div>
            </div>
            <div class="bot-controls">
                <button id="start-bot" class="btn-primary">‚ñ∂Ô∏è Start Bot</button>
                <button id="stop-bot" class="btn-secondary" disabled>‚èπÔ∏è Stop Bot</button>
                <button id="show-settings" class="btn-secondary">‚öôÔ∏è Settings</button>
            </div>
        </div>

        <!-- Learning Dashboard -->
        <div class="learning-dashboard">
            <h2>üß† AI Learning Dashboard</h2>
            <div class="learning-grid">
                <div class="learning-card">
                    <h3>üìä Performance Metrics</h3>
                    <div class="metric-row">
                        <span class="metric-label">Total Trades:</span>
                        <span class="metric-value" id="learning-total-trades">0</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Win Rate:</span>
                        <span class="metric-value" id="learning-win-rate">0.0%</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Total P&L:</span>
                        <span class="metric-value" id="learning-total-pnl">$0.00</span>
                    </div>
                </div>
                <div class="learning-card">
                    <h3>üîß Adaptive Parameters</h3>
                    <div class="metric-row">
                        <span class="metric-label">Position Size:</span>
                        <span class="metric-value" id="learning-position-size">$100.00</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Target Leverage:</span>
                        <span class="metric-value" id="learning-leverage">2.00x</span>
                    </div>
                    <div class="param-bar-container">
                        <div class="param-bar" id="position-bar" style="width: 100%"></div>
                    </div>
                </div>
            </div>
            <div class="recent-trades-section">
                <h3>üìú Recent Trades</h3>
                <div class="trades-list" id="recent-trades-list">
                    <div class="trade-item empty">No trades recorded yet...</div>
                </div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settings-panel" style="display: none;">
            <h2>‚öôÔ∏è Trading Configuration</h2>
            <div class="settings-group">
                <label for="groq-api-key">
                    <strong>Groq API Key</strong>
                    <input type="password" id="groq-api-key" placeholder="Enter your Groq API key">
                </label>
                <button id="save-api-key" class="btn-secondary">Save API Key</button>
            </div>
            <div class="settings-group">
                <label for="ai-threshold">
                    <strong>AI Confidence Threshold:</strong>
                    <input type="range" id="ai-threshold" min="0.1" max="0.9" step="0.1" value="0.7">
                    <span id="ai-threshold-value">0.7</span>
                </label>
            </div>
            <div class="settings-group">
                <label for="timer-duration">
                    <strong>Trade Timer (seconds):</strong>
                    <input type="number" id="timer-duration" min="10" max="300" value="60">
                </label>
            </div>
            <div class="settings-group">
                <label for="realistic-mode">
                    <input type="checkbox" id="realistic-mode">
                    <strong>Realistic Mode</strong> - Enable fees & slippage
                </label>
            </div>
            <div class="settings-group">
                <label for="ai-bias">
                    <input type="checkbox" id="ai-bias" checked>
                    <strong>AI Confidence Bias</strong> - High-confidence trades trend upward
                </label>
                <p class="settings-hint">Disable for random market simulation (harder).</p>
            </div>
            <button id="close-settings">Close Settings</button>
        </div>

        <!-- Risk Warning Banner -->
        <div class="risk-warning" id="risk-warning">
            <div class="risk-warning-content">
                <span class="warning-icon">‚ö†Ô∏è</span>
                <div class="warning-text">
                    <strong>PAPER TRADING MODE</strong> - No real money at risk
                    <br>
                    <small id="price-source-indicator">Price source: <span id="price-source-label">Checking...</span></small>
                </div>
                <button id="check-live-readiness" class="btn-small">Check Live Readiness</button>
            </div>
        </div>

        <!-- Live Readiness Modal -->
        <div class="modal" id="readiness-modal">
            <div class="modal-content">
                <h2>üìä Live Trading Readiness Check</h2>
                <div id="readiness-results"></div>
                <button id="close-readiness-modal" class="btn-secondary">Close</button>
            </div>
        </div>

        <!-- Status Message -->
        <div class="status-message" id="status-message"></div>

        <!-- Active Trade Panel -->
        <div class="active-trade-panel" id="active-trade-panel" style="display: none;">
            <h3>üéØ Active Trade</h3>
            <div class="trade-info">
                <div class="trade-row">
                    <span class="trade-label">Question:</span>
                    <span class="trade-value" id="trade-question">Loading...</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Entry Price:</span>
                    <span class="trade-value" id="entry-price">$0.00</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Current Price:</span>
                    <span class="trade-value" id="current-price">$0.00</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Position Size:</span>
                    <span class="trade-value" id="position-size">$100</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">P&L:</span>
                    <span class="trade-value" id="pnl-display">$0.00</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Time Left:</span>
                    <span class="trade-value" id="timer-display">60s</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Momentum:</span>
                    <span class="trade-value" id="momentum-indicator">Neutral</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Take Profit:</span>
                    <span class="trade-value" id="take-profit-target">$0.00</span>
                </div>
                <div class="trade-row">
                    <span class="trade-label">Stop Loss:</span>
                    <span class="trade-value" id="stop-loss-target">$0.00</span>
                </div>
            </div>
            <div class="trade-controls">
                <button id="start-trade" class="btn-primary">Start Trade</button>
                <button id="sell-now" class="btn-warning">Sell Now</button>
                <button id="close-trade" class="btn-secondary">Close Trade</button>
            </div>
        </div>

        <!-- Market Grid -->
        <div class="market-grid" id="market-grid">
            <div class="loading">Loading markets...</div>
        </div>

        <!-- Session Report -->
        <div class="session-report" id="session-report" style="display: none;">
            <h3>üìä Session Report</h3>
            <div class="report-stats">
                <div class="report-item">
                    <span class="report-label">Total P&L:</span>
                    <span class="report-value" id="report-pnl">$0</span>
                </div>
                <div class="report-item">
                    <span class="report-label">Win Rate:</span>
                    <span class="report-value" id="report-win-rate">0%</span>
                </div>
                <div class="report-item">
                    <span class="report-label">Total Trades:</span>
                    <span class="report-value" id="report-trades">0</span>
                </div>
                <div class="report-item">
                    <span class="report-label">Best Trade:</span>
                    <span class="report-value" id="report-best">$0</span>
                </div>
                <div class="report-item">
                    <span class="report-label">Worst Trade:</span>
                    <span class="report-value" id="report-worst">$0</span>
                </div>
            </div>
            <div class="trade-history">
                <h4>Trade History</h4>
                <ul id="trade-history-list"></ul>
            </div>
            <button id="new-session" class="btn-primary">Start New Session</button>
        </div>
    </div>
        <div class="active-trade-panel" id="active-trade-panel">
            <div class="trade-header">
                <h3 id="trade-question">Market Question</h3>
                <button id="close-trade" class="close-btn">‚úï</button>
            </div>
            <div class="trade-info">
                <div class="info-row">
                    <span class="label">Entry Price:</span>
                    <span class="value" id="entry-price">$0.00</span>
                </div>
                <div class="info-row">
                    <span class="label">Current Price:</span>
                    <span class="value" id="current-price">$0.00</span>
                </div>
                <div class="info-row">
                    <span class="label">Position Size:</span>
                    <span class="value" id="position-size">0 shares</span>
                </div>
                <div class="info-row">
                    <span class="label">Momentum:</span>
                    <span class="value" id="momentum-indicator">‚è∏Ô∏è Neutral</span>
                </div>
            </div>
            <div class="pnl-display" id="pnl-display">$0.00</div>
            <div class="trade-targets" id="trade-targets">
                <span class="target-label">üéØ TP: <span id="take-profit-target">+$0</span></span>
                <span class="target-label">‚õî SL: <span id="stop-loss-target">-$0</span></span>
            </div>
            <div class="timer-display" id="timer-display">20s</div>
            <div class="trade-controls">
                <button id="start-trade" class="btn-start">Start Trade <span class="shortcut-hint">Enter</span></button>
                <button id="sell-now" class="btn-sell">Sell Now <span class="shortcut-hint">Space</span></button>
            </div>
        </div>

        <!-- Session Report -->
        <div class="session-report" id="session-report">
            <h2>üìä Session Report</h2>
            <div class="report-stats">
                <div class="report-stat">
                    <span class="label">Total P&L:</span>
                    <span class="value" id="report-pnl">$0.00</span>
                </div>
                <div class="report-stat">
                    <span class="label">Win Rate:</span>
                    <span class="value" id="report-win-rate">0%</span>
                </div>
                <div class="report-stat">
                    <span class="label">Total Trades:</span>
                    <span class="value" id="report-trades">0</span>
                </div>
                <div class="report-stat">
                    <span class="label">Best Trade:</span>
                    <span class="value" id="report-best">$0.00</span>
                </div>
                <div class="report-stat">
                    <span class="label">Worst Trade:</span>
                    <span class="value" id="report-worst">$0.00</span>
                </div>
            </div>
            <div class="trade-history">
                <h3>Trade History</h3>
                <div id="trade-history-list"></div>
            </div>
            <button id="new-session" class="btn-primary">Start New Session</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="save-logs.js"></script>
    <script src="game.js"></script>
</body>
</html>
